# Instructions for Reproducing Experiments from the Paper

Table of Contents:
* [Experiment A](#experiment-a-evaluation-of-diffco-score)
* Experiment B (documentation coming soon)
* [Experiment C](#experiment-c-trajectory-optimization-that-avoids-important-objects)
* [Experiment D](#experiment-d-trajectory-optimization-with-dynamic-objects)
* Experiment E (documentation coming soon)
* Experiment F (documentation coming soon)
* Experiment G (documentation coming soon)

---

## Experiment A: Evaluation of DiffCo Score

### 2D environment
Use the script `distest_error_vis.py` to generate correlation and FCL comparison figures. If you do not provide a dataset, a default one will be autogenerated for you.
```
python scripts/distest_error_vis.py correlate
```
<img src="assets/experiments-demo-img/correlate_example1_dataset.png" width="300"/>
<img src="assets/experiments-demo-img/correlate_example1.png" width="300"/>

```
python scripts/distest_error_vis.py compare
```
<img src="assets/experiments-demo-img/compare_example1.png" height="300"/>

To create a dataset, use the script `2d_data_generation.py` to create data for a handful of predefined environments. Use the `--help` flag to see all the possible environments.
```
python scripts/2d_data_generation.py --help`
```

```
python scripts/2d_data_generation.py --env 3d_halfnarrow --dof 7 --link-length 1
```
<img src="assets/experiments-demo-img/dataset_example1.png" width="300"/>

```
python scripts/2d_data_generation.py --env 1rect_1circle --dof 3 --link-length 2
```
<img src="assets/experiments-demo-img/dataset_example2.png" width="300"/>

Once you have the dataset you want, pass it in to the `distest_error_vis.py` script with the `--dataset` flag.


### 3D environment
Documentation coming soon.

---

## Experiment C: Trajectory Optimization that Avoids Important Objects
### 2D environment
Use the script `2d_trajopt.py` to generate trajectory optimization plans and figures. If you do not provide a dataset, a default one will be autogenerated for you.
```
python scripts/2d_trajopt.py
```
<img src="assets/experiments-demo-img/trajopt_example1.png" width="300"/>

You can also specify custom start and target configurations.
```
python scripts/2d_trajopt.py --start-cfg 1 0.5 0 --target-cfg -1 -0.5 0
```
<img src="assets/experiments-demo-img/trajopt_example2.png" width="300"/>

Using the `--safety-margin` flag, you can assign a bias to one of the classes.
```
python scripts/2d_trajopt.py --start-cfg 1 0.5 0 --target-cfg -1 -0.5 0 --safety-margin -12 -1.2
```
<img src="assets/experiments-demo-img/trajopt_example3.png" width="300"/>

You can pass in a custom dataset with the `--dataset` flag.
```
python scripts/2d_data_generation.py --env 2class_2 --dof 7 --label-type class --link-length 1
python scripts/2d_trajopt.py -d data/landscape/2d_7dof_2obs_class_2class_2.pt --start-cfg 3.14 0 0 0 0 0 0 --target-cfg 0 0 0 0 0 0 0
```
<img src="assets/experiments-demo-img/trajopt_example4.png" width="300"/>

The script also generates a video animation.

![trajectory optimization video example](assets/experiments-demo-img/trajopt_example4.mp4)



### 3D environment
Documentation coming soon.

---

## Experiment D: Trajectory Optimization with Dynamic Objects
### 2D environment
Use the script `active.py` to generate trajectories and figures for snapshots of environments with moving obstacles.
